import argparse
import os
import sys

def CreatePentest(projectid, clientName):

    homePath = os.path.expanduser("~") + "/"
    projectPath  = homePath + projectid + "_" + clientName

    if not os.path.exists(projectPath):
        
        print "Creating Main-Folder in " + projectPath
        os.makedirs(projectPath)

        print "Creating Image-Folder"
        os.makedirs(projectPath+ "/" + "Image")
        
        print "Creating TCP-Dump-Folder"
        os.makedirs(projectPath+ "/" + "TCPDump")
        
        print "Creating Scans-Folder"
        os.makedirs(projectPath+ "/" + "Scans")
        
        print "Creating Nmap-Folder"
        os.makedirs(projectPath+ "/" + "Scans/Nmap")
        
        print "Creating SSLScan-Folder"
        os.makedirs(projectPath+ "/" + "Scans/SSLScan")

        print "Creating WebScan-Folder"
        os.makedirs(projectPath+ "/" + "Scans/WebScan")
        
        print "Creating Stuff-Folder"
        os.makedirs(projectPath+ "/" + "Stuff")

        print "Creating Burp-Folder"
        os.makedirs(projectPath+ "/" + "Burp")

        print "Creating Notes-File"
        open(projectPath+ "/" + "notes.md","a").close()

        return 0
    return 1

print " _____ _             _  ______          _            _   "
print "/  ___| |           | | | ___ \        | |          | |"  
print "\ `--.| |_ __ _ _ __| |_| |_/ /__ _ __ | |_ ___  ___| |_" 
print " `--. \ __/ _` | '__| __|  __/ _ \ '_ \| __/ _ \/ __| __|"
print "/\__/ / || (_| | |  | |_| | |  __/ | | | ||  __/\__ \ |_ "
print "\____/ \__\__,_|_|   \__\_|  \___|_| |_|\__\___||___/\__|"
print ""                                                
argParser = argparse.ArgumentParser(description="Builds a Folder Structure for Documenting a Penetration Test.")
argParser.add_argument("-id", type=str,help="-id = projectid of client project")
argParser.add_argument("-client", type=str,help="-client: Name of Client")
args = argParser.parse_args()

if args.id:
    if args.client:
        if CreatePentest(args.id,args.client) != 0:
            print "Uups Something went wrong. Maybe the Folder already exists."
            sys.exit(1)
        else:
            print "Structure created."
            sys.exit(0)
    else:
        print "No clientname specified"
        sys.exit(1)
else:
    print "No projectid specified"
    sys.exit(1)